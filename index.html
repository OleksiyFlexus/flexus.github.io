<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Тест з плитки - Telegram WebApp</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 20px;
      background: var(--tg-theme-bg-color, #fff);
      color: var(--tg-theme-text-color, #000);
      min-height: 100vh;
      box-sizing: border-box;
    }
    #app {
      max-width: 700px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.6em;
      margin-bottom: 15px;
    }
    .question p {
      font-weight: bold;
      font-size: 1.1em;
    }
    .options label {
      display: block;
      margin: 8px 0;
      cursor: pointer;
      user-select: none;
    }
    input[type="radio"] {
      margin-right: 8px;
      cursor: pointer;
    }
    .feedback {
      margin-top: 10px;
      font-weight: bold;
      font-size: 1em;
      padding: 8px 12px;
      border-radius: 6px;
      width: fit-content;
    }
    .correct {
      color: #155724;
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
    }
    .incorrect {
      color: #721c24;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
    }
    button {
      background-color: var(--tg-theme-button-color, #0088cc);
      color: var(--tg-theme-button-text-color, #fff);
      border: none;
      padding: 10px 15px;
      font-size: 1em;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:disabled {
      background-color: #999;
      cursor: not-allowed;
    }
    .result {
      font-size: 1.2em;
      font-weight: bold;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="app">
    <h1>Тест з вивчення плитки</h1>

    <div v-if="!quizCompleted">
      <p>Питання {{ currentQuestion + 1 }} / {{ questions.length }}</p>
      <div class="question">
        <p>{{ questions[currentQuestion].text }}</p>
        <div class="options">
          <label v-for="(option, idx) in questions[currentQuestion].options" :key="idx" :class="{disabled: answered}">
            <input 
              type="radio" 
              :value="idx" 
              v-model="userAnswers[currentQuestion]" 
              :disabled="answered"
              @change="checkAnswer(idx)" 
            />
            {{ option }}
          </label>
        </div>
        <div v-if="answered" 
             :class="{'feedback': true, 'correct': isAnswerCorrect, 'incorrect': !isAnswerCorrect}">
          {{ isAnswerCorrect ? 'Правильно!' : 'Неправильно!' }}
        </div>
      </div>
      <button 
        :disabled="!answered" 
        @click="nextOrSubmit">
        {{ currentQuestion < questions.length -1 ? 'Наступне питання' : 'Завершити тест' }}
      </button>
    </div>

    <div v-else class="result">
      <p>Ваш результат: {{ score }} / {{ questions.length }}</p>
      <button @click="restartQuiz">Почати заново</button>
    </div>
  </div>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          questions: [
            {
              text: 'Який процес у виробництві плитки забезпечує високу міцність і низьке водопоглинання?',
              options: ['А. Випал при високій температурі', 'Б. Глазурування', 'В. Ректифікація', 'Г. Ламінування'],
              correct: 0
            },
            {
              text: 'Що найкраще описує порцелянову плитку порівняно з керамічною?',
              options: ['А. Менша пористість і більша міцність', 'Б. Легша вага', 'В. Вища гнучкість', 'Г. Яскравіший колір'],
              correct: 0
            },
            {
              text: 'Для чого застосовується глазур на плитці?',
              options: ['А. Захист від механічних пошкоджень і декоративний ефект', 'Б. Зменшення ваги плитки', 'В. Покращення теплоізоляції', 'Г. Збільшення електропровідності'],
              correct: 0
            },
            {
              text: 'Що означає термін "ректифікація" плитки?',
              options: ['А. Механічне обрізання країв для ідеальної геометрії', 'Б. Нанесення глазурі', 'В. Випал при високій температурі', 'Г. Виробництво мозаїки'],
              correct: 0
            },
            {
              text: 'Яка властивість керамограніту робить його ідеальним для зовнішніх облицювань?',
              options: ['А. Морозостійкість і низьке водопоглинання', 'Б. Легка вага', 'В. Висока теплопровідність', 'Г. Пориста структура'],
              correct: 0
            },
            {
              text: 'Що таке технічний грес у плитці?',
              options: ['А. Повнотіла плитка з високою міцністю', 'Б. Глазурована плитка з декоративним малюнком', 'В. Мозаїчна плитка', 'Г. Плитка для стелі'],
              correct: 0
            },
            {
              text: 'Як називається процес нанесення кольорового шару на плитку перед випалюванням?',
              options: ['А. Глазурування', 'Б. Декорування', 'В. Керамізація', 'Г. Полірування'],
              correct: 1
            },
            {
              text: 'Який інструмент найчастіше використовують для різання керамічної плитки?',
              options: ['А. Плиткоріз', 'Б. Лазерний різак', 'В. Болгарка', 'Г. Рубанок'],
              correct: 0
            },
            {
              text: 'Для чого застосовується глазур на плитці?',
              options: ['А. Захист і прикраса', 'Б. Охолодження', 'В. Електроізоляція', 'Г. Магнітні властивості'],
              correct: 0
            },
            {
              text: 'Що таке мозаїчна плитка?',
              options: ['А. Маленькі шматочки плитки для створення візерунків', 'Б. Велика плитка для підлоги', 'В. Плитка з металу', 'Г. Плитка для стелі'],
              correct: 0
            }
          ],
          currentQuestion: 0,
          userAnswers: [],
          quizCompleted: false,
          score: 0,
          answered: false,
          isAnswerCorrect: false,
        }
      },
      methods: {
        checkAnswer(selectedIdx) {
          this.answered = true;
          this.isAnswerCorrect = selectedIdx === this.questions[this.currentQuestion].correct;
          this.userAnswers[this.currentQuestion] = selectedIdx;
        },
        nextOrSubmit() {
          if (!this.answered) return;
          if (this.currentQuestion < this.questions.length - 1) {
            this.currentQuestion++;
            this.answered = false;
            this.isAnswerCorrect = false;
          } else {
            this.calculateScore();
            this.quizCompleted = true;
          }
        },
        calculateScore() {
          this.score = this.questions.reduce((acc, q, idx) => acc + (this.userAnswers[idx] === q.correct ? 1 : 0), 0);
        },
        restartQuiz() {
          this.currentQuestion = 0;
          this.userAnswers = [];
          this.quizCompleted = false;
          this.score = 0;
          this.answered = false;
          this.isAnswerCorrect = false;
        }
      },
      mounted() {
        if(window.Telegram && window.Telegram.WebApp){
          Telegram.WebApp.ready();
          Telegram.WebApp.expand();
        }
      }
    }).mount('#app');
  </script>
</body>
</html>
